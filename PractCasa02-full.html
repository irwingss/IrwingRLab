<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Introducción a R para Ciencias C1-S3-clase2</title>

<script src="site_libs/header-attrs-2.7.3/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">IrwingRLab</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Inicio</a>
</li>
<li>
  <a href="PractCasa01-full.html">Practica de Casa 1</a>
</li>
<li>
  <a href="PractCasa02-full.html">Practica de Casa 2</a>
</li>
<li>
  <a href="PractCasa03-full.html">Practica de Casa 3</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Introducción a R para Ciencias C1-S3-clase2</h1>

</div>

<div id="TOC">
yes
</div>

<div id="práctica-de-casa-02---programación-con-r-y-dplyr" class="section level1">
<h1><strong>Práctica de Casa 02 - Programación con R y dplyr</strong></h1>
<p>Link de la práctica desarrollada: <a href="https://irwingss.github.io/IrwingRLab/PractCasa02-full.html">Introducción a R para Ciencias C1-S3-clase2 (irwingss.github.io)</a></p>
<p>Realiza los siguientes ejercicios durante tu tiempo libre para mejorar tus habilidades de manejo del lenguaje de programación R.</p>
<p>Recuerda realizar esta práctica luego de haber aprendido la información de la clase 1 y 2 de la semana 3:</p>
<ul>
<li>R-Notebook-C1-S3-clase1y2.Rmd</li>
</ul>
<blockquote>
<p><strong>Nota:</strong> Si necesitas crear un code chunk los atajos en el teclado son en WINDOWS: <code>Crtl+Alt+i</code>, y en MAC: <code>Command+Alt+i</code>.</p>
</blockquote>
<pre class="r"><code>library(tidyverse)
library(gapminder)</code></pre>
<div id="ejercicio-1" class="section level2">
<h2><strong>Ejercicio 1:</strong></h2>
<p>Calcula el promedio del GDP Percápita (columna <code>gdpPercap</code>) para cada continente de la base de datos <code>gapminder</code>. Crea un resumen estadístico que contenga estos nuevos datos en la columna llamada <code>pib_percapita_prom</code>. Asegúrate de reordenar la tabla final para que muestre el valor más alto en la primera fila. Asigna el resultado final a <code>gdp_continentes</code>.</p>
<pre class="r"><code>data(gapminder)

gdp_continentes &lt;- gapminder %&gt;% 
  group_by(continent) %&gt;% 
  summarise(pib_percapita_prom = mean(gdpPercap)) %&gt;% 
  arrange(desc(pib_percapita_prom))

gdp_continentes</code></pre>
<pre><code>## # A tibble: 5 x 2
##   continent pib_percapita_prom
##   &lt;fct&gt;                  &lt;dbl&gt;
## 1 Oceania               18622.
## 2 Europe                14469.
## 3 Asia                   7902.
## 4 Americas               7136.
## 5 Africa                 2194.</code></pre>
<p><strong>¿Qué continente tiene el mayor Producto Interno Bruto per cápita promedio?</strong></p>
<p>Rpta/. Oceanía.</p>
<div style="page-break-after: always;"></div>
</div>
<div id="ejercicio-2" class="section level2">
<h2><strong>Ejercicio 2:</strong></h2>
<div id="match-operator-in" class="section level3">
<h3>match operator <code>%in%</code></h3>
<p>El realizar filtrados es muy útil. Cuando deseamos filtrar un valor dentro de una columna usamos una estructura lógica similar a <code>COL == "Valor"</code>. Sin embargo, algunas veces es necesario buscar más de un valor en la columna. En esos casos uno imaginaría que es útil hacer algo como <code>COL == c("Valor1", "Valor2", "Valor3")</code>. Veamos si es correcto.</p>
<pre class="r"><code># Verifica la cantidad de filas que existe 
# para Perú y Ecuador en la base de datos gapminder
# Usa el operador lógico &quot;o&quot; | para definir dos condiciones
# que deben de cumplirse, una o la otra, para filtrar las filas
gapminder %&gt;% filter(country == &quot;Peru&quot; | country == &quot;Ecuador&quot;) %&gt;% 
  group_by(country) %&gt;%  count(country)</code></pre>
<pre><code>## # A tibble: 2 x 2
## # Groups:   country [2]
##   country     n
##   &lt;fct&gt;   &lt;int&gt;
## 1 Ecuador    12
## 2 Peru       12</code></pre>
<pre class="r"><code># Utilicemos la estructura COL == c(&quot;Valor1&quot;, &quot;Valor2&quot;)
gapminder %&gt;% filter(country == c(&quot;Peru&quot;,&quot;Ecuador&quot;)) %&gt;% 
  group_by(country) %&gt;%  count(country)</code></pre>
<pre><code>## # A tibble: 2 x 2
## # Groups:   country [2]
##   country     n
##   &lt;fct&gt;   &lt;int&gt;
## 1 Ecuador     6
## 2 Peru        6</code></pre>
<p>Claramente, esta estructura no funciona. Nos indica 6 filas para cada país, en lugar de 12 que son las que tiene cada uno. Siempre que quieras buscar más de un valor en una condición lógica, evita el uso de <code>==</code> y usa en su lugar <code>%in%</code>. El operador <code>%in%</code> busca cada elemento del vector que le proporcionemos a la derecha, en el conjunto de datos que le brindemos a la izquierda. Por ejemplo, <code>COL %in% c("A", "B")</code> busca <code>A</code> en <code>COL</code> y luego busca <code>B</code> en <code>COL</code>, filtrando todas las filas que cumplan con una u otra búsqueda. <strong>Por tanto, <code>%in%</code> reemplaza una secuencia de condiciones lógicas “o” <code>|</code>.</strong></p>
<pre class="r"><code># Utilicemos el operador %in%
gapminder %&gt;% filter(country %in% c(&quot;Peru&quot;,&quot;Ecuador&quot;)) %&gt;% 
  group_by(country) %&gt;%  count(country)</code></pre>
<pre><code>## # A tibble: 2 x 2
## # Groups:   country [2]
##   country     n
##   &lt;fct&gt;   &lt;int&gt;
## 1 Ecuador    12
## 2 Peru       12</code></pre>
<pre class="r"><code># Incluso podemos usar un index
index &lt;- c(&quot;Ecuador&quot;,&quot;Peru&quot;,&quot;Chile&quot;,&quot;Mexico&quot;,&quot;Colombia&quot;)

gapminder %&gt;% filter(country %in% index) %&gt;% 
  group_by(country) %&gt;%  count(country)</code></pre>
<pre><code>## # A tibble: 5 x 2
## # Groups:   country [5]
##   country      n
##   &lt;fct&gt;    &lt;int&gt;
## 1 Chile       12
## 2 Colombia    12
## 3 Ecuador     12
## 4 Mexico      12
## 5 Peru        12</code></pre>
<p>Ahora aplica lo aprendido para calcular el promedio de vida (columna <code>lifeExp</code>) de cada uno de los paises (columna <code>country</code>) mencionados en el <code>index</code> para <code>gapminder</code>.</p>
<pre class="r"><code>gapminder %&gt;% filter(country %in% index) %&gt;%
  group_by(country) %&gt;% 
  summarise(prom = mean(lifeExp)) %&gt;% 
  arrange(desc(prom))</code></pre>
<pre><code>## # A tibble: 5 x 2
##   country   prom
##   &lt;fct&gt;    &lt;dbl&gt;
## 1 Chile     67.4
## 2 Mexico    65.4
## 3 Colombia  63.9
## 4 Ecuador   62.8
## 5 Peru      58.9</code></pre>
<p><strong>¿Qué país, de los seleccionados, tiene el mayor Producto Interno Bruto per cápita promedio?</strong></p>
<p>Rpta/. Chile.</p>
<p>Filtrado de valores que “Comienzan con la letra …”<br />
Esto a veces es una gran necesidad. Aprenderemos a filtrar valores que comienzan con una letra usando la función <code>substr()</code> para crear una condición lógica dentro de <code>filter()</code>. Primero conoce como usar <code>substr()</code>.</p>
<pre class="r"><code># Crea un vector con tres países
paises &lt;- c(&quot;República dominicana&quot;, &quot;Costa Rica&quot;, &quot;Colombia&quot;)

# Ejecuta substr para que veas qué hacen los argumentos
# start y stop de substr(). Cambia los números si gustas
substr(paises, start = 1, stop = 1)</code></pre>
<pre><code>## [1] &quot;R&quot; &quot;C&quot; &quot;C&quot;</code></pre>
<pre class="r"><code>substr(paises, start = 1, stop = 3)</code></pre>
<pre><code>## [1] &quot;Rep&quot; &quot;Cos&quot; &quot;Col&quot;</code></pre>
<pre class="r"><code>substr(paises, start = 3, stop = 5)</code></pre>
<pre><code>## [1] &quot;púb&quot; &quot;sta&quot; &quot;lom&quot;</code></pre>
<p>La función <code>substr()</code> le aplica lo mismo a todos los elementos de un vector de tipo carácter (o una columna de tipo carácter dentro de una tabla), indicando en qué posición dentro de cada elemento iniciar a mostrar los caracteres (<code>start</code>) y dónde detenerse (<code>stop</code>). <code>start =1, stop = 2</code> significaría: muéstrame desde la primera hasta la segunda letra de cada elemento del conjunto de datos.</p>
<p>Podemos usar esta función como <em>el lado izquierdo</em> de una condición lógica con <code>%in%</code>. Indica que busque, por ejemplo, la letra <code>"A"</code> en el conjunto de datos “recortado” con <code>substr()</code> que muestre sólo la primera letra del texto en cada fila en la columna <code>continent</code>.</p>
<pre class="r"><code>gapminder %&gt;% 
  filter(substr(continent, start = 1, stop = 1) %in% &quot;A&quot;) %&gt;% 
  distinct(continent)</code></pre>
<pre><code>## # A tibble: 3 x 1
##   continent
##   &lt;fct&gt;    
## 1 Asia     
## 2 Africa   
## 3 Americas</code></pre>
<p>Ahora aplica lo aprendido, filtra la base de datos para que solo aparezcan los países que comienzan con “Co”.</p>
<pre class="r"><code>gapminder %&gt;% 
  filter(substr(country, start = 1, stop = 2) %in% &quot;Co&quot;) %&gt;% 
  distinct(country)</code></pre>
<pre><code>## # A tibble: 6 x 1
##   country         
##   &lt;fct&gt;           
## 1 Colombia        
## 2 Comoros         
## 3 Congo, Dem. Rep.
## 4 Congo, Rep.     
## 5 Costa Rica      
## 6 Cote d&#39;Ivoire</code></pre>
<p><strong>¿Cuántos nombres de países inician con la sílaba “Co”?</strong></p>
<p>Rpta/. Son seis países.</p>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="ejercicio-3" class="section level2">
<h2><strong>Ejercicio 3:</strong></h2>
<p>Llama a la base de datos <code>airquality</code> y calcula el promedio y la desviación estándar de las primeras 4 columnas de la base de datos, agrupando los datos por mes (columna <code>Month</code>). Asigna el resultado con el nombre <code>prom.meses</code>. Redondea los valores numéricos de <code>prom.meses</code> a dos decimales con la función <code>round()</code></p>
<pre class="r"><code># Escribe tu código aquí
prom.meses &lt;- airquality %&gt;%  group_by(Month) %&gt;%
  select(1:4) %&gt;%  summarise_all(funs(mean), na.rm=TRUE)</code></pre>
<pre><code>## Adding missing grouping variables: `Month`</code></pre>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## Please use a list of either functions or lambdas: 
## 
##   # Simple named list: 
##   list(mean = mean, median = median)
## 
##   # Auto named with `tibble::lst()`: 
##   tibble::lst(mean, median)
## 
##   # Using lambdas
##   list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<pre class="r"><code># Visualiza prom.meses
round(prom.meses[2:5])</code></pre>
<pre><code>## # A tibble: 5 x 4
##   Ozone Solar.R  Wind  Temp
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1    31     167    10    77
## 2    60     172     9    84
## 3    59     216     9    84
## 4    29     190    10    79
## 5    24     181    12    66</code></pre>
<p>Modifica el tibble <code>prom.meses</code> convirtiendo la columna <code>Month</code> a factor y cambiando los valores numéricos por el nombre de cada mes según corresponda.</p>
<pre class="r"><code># Escribe tu código aquí
prom.meses$Month &lt;- factor(prom.meses$Month, labels = c(&quot;5&quot;=&quot;Mayo&quot;,
                                                        &quot;6&quot;=&quot;Junio&quot;,
                                                        &quot;7&quot;=&quot;Julio&quot;,
                                                        &quot;8&quot;=&quot;Agosto&quot;,
                                                        &quot;9&quot;=&quot;Setiembre&quot;))
# Visualiza prom.meses
prom.meses</code></pre>
<pre><code>## # A tibble: 5 x 5
##   Month     Ozone Solar.R  Wind  Temp
##   &lt;fct&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Mayo       31.4    167. 10.2   76.9
## 2 Junio      60.0    172.  8.79  84.0
## 3 Julio      59.1    216.  8.94  83.9
## 4 Agosto     29.4    190. 10.3   79.1
## 5 Setiembre  23.6    181. 11.6   65.5</code></pre>
<div style="page-break-after: always;"></div>
</div>
<div id="ejercicio-4" class="section level2">
<h2><strong>Ejercicio 4:</strong></h2>
<p>Une los valores de la columna <code>Month</code> y <code>Day</code> de la base de datos <code>airquality</code> en una nueva columna llamada <code>Mes_Dia</code>, consignando el separador el guión bajo <code>"_"</code>. Usa alguna de las funciones de la parte de tablas anchas o largas de la clase, y usa pipe lo más que puedas en tu código. Filtra las filas que tengan valores de radiación solar (columna <code>Solar.R</code>) mayores a 250 y valores de ozono (columna <code>Ozone</code>) mayores a 40.</p>
<pre class="r"><code># Escribe tu código aquí
airquality %&gt;% 
  unite(Mes_Dia, Month, Day, sep=&quot;_&quot;) %&gt;% 
  filter(Solar.R &gt; 250 &amp; Ozone &gt; 40)</code></pre>
<pre><code>##    Ozone Solar.R Wind Temp  Mes_Dia
## 1     45     252 14.9   81  Mayo_29
## 2     71     291 13.8   90  Junio_9
## 3    135     269  4.1   84  Julio_1
## 4     77     276  5.1   88  Julio_7
## 5     97     267  6.3   92  Julio_8
## 6     97     272  5.7   92  Julio_9
## 7     48     260  6.9   81 Julio_16
## 8     61     285  6.3   84 Julio_18
## 9     80     294  8.6   86 Julio_24
## 10    50     275  7.4   86 Julio_29
## 11    64     253  7.4   83 Julio_30
## 12    59     254  9.2   81 Julio_31
## 13   122     255  4.0   89 Agosto_7</code></pre>
<p><strong>¿A qué mes pertenecen la mayor cantidad de observaciones con estas características de radiación solar y ozono?</strong></p>
<p>Rpta/. Al mes 7</p>
<div style="page-break-after: always;"></div>
</div>
<div id="ejercicio-5" class="section level2">
<h2><strong>Ejercicio 5:</strong></h2>
<p>Convierte la base de datos airquality a tabla larga, apilando todas las columnas numéricas y manteniendo las columnas <code>Month</code> y <code>Day</code>. Asignale el nombre <code>t_larga</code>. Una vez guardada la variable úsala para filtra la variable <code>Ozone</code> del mes <code>8</code> y calcula el promedio de dicho conjunto de datos.</p>
<pre class="r"><code># Crea la variable t_larga
t_larga &lt;- gather(airquality, Variables, Valores, -Month, -Day)

# Visualiza la variable t_larga
View(t_larga)

# Realiza el filtrado
t_larga %&gt;% 
  filter(Month==&quot;8&quot; &amp; Variables == &quot;Ozone&quot;) %&gt;% 
  summarise(promedio = mean(Valores, na.rm=TRUE))</code></pre>
<pre><code>##   promedio
## 1      NaN</code></pre>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
